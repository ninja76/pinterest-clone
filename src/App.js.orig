import React, { useCallback, useState, setState, useEffect } from "react";
import axios from "axios";
import { ThemeProvider, createMuiTheme, makeStyles } from '@material-ui/core/styles';
import { CssBaseline } from '@material-ui/core';
import GridList from '@material-ui/core/GridList';
import GridListTile from '@material-ui/core/GridListTile';
import GridListTileBar from '@material-ui/core/GridListTileBar';
import Grid from '@material-ui/core/Grid';
import IconButton from '@material-ui/core/IconButton';
import StarBorderIcon from '@material-ui/icons/StarBorder';
import RecipeReviewCard from './components/Card';
import SearchAppBar from './components/AppBar';
import Masonry from 'react-masonry-component';

const theme = createMuiTheme({
  palette: {
    type: 'light',
  },
});

const useStyles = makeStyles(theme => ({
  root: {
    flexGrow: 1,
  }
}));

export default function ImageGridList() {
  const classes = useStyles();
  const [pins, setPins] = useState();

  useEffect(() => {
   axios
     .get(
       "http://chlover-833630845.us-east-1.elb.amazonaws.com/pins"
     )
     .then(({ data }) => {
      setPins(data);
      console.log(pins);
     });
  }, []);

  return pins ? ( 
    <ThemeProvider theme={theme}>
      <CssBaseline />
      <div>
        <SearchAppBar />
        <Grid container justify="center" spacing={3} style={{padding: 25, paddingTop: 75}}>
          {pins.map(tile => (
            <Grid item xs={12} md={4} key={tile.title}>
              <RecipeReviewCard image={'https://roxlr-thumbs.s3.amazonaws.com/pins/resized/small/' + tile.imageId.split('/')[1]} name={tile.title} />
            </Grid>
         ))}
        </Grid>
      </div>
    </ThemeProvider>
    ) : (
      <ThemeProvider theme={theme}>
        <CssBaseline />
        <div>
          <SearchAppBar />
        </div>
        Loading.....
      </ThemeProvider>)
  }
